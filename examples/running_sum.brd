# implementation:
# put 'self' in the closure environment for all of these functions

set RunningSum = define Object subclass
    set new = function()
        set self.sum = 0
        set self.sum_sq = 0
        set self.n = 0
    end

    set update = function(num)
        set self.sum = self.sum + num
        set self.sum_sq = self.sum_sq + num^2
        set n = n + 1
    end

    set mean = function()
        return self.sum / self.n
    end

    set stdev = function()
        return ((self.sum_sq / self.n) - ((self.sum / self.n) ^ 2)) ^ 0.5
    end
end

set x = RunningSum.new()
x.update(50)
x.update(123.1234)
@writeln(x.mean())
@writeln(x.stdev())
