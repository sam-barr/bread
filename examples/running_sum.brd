# TODO: how to do super?

set RunningSum = @Object subclass
  # special syntax for constructor
  constructor()
    set this.sum = 0
    set this.sum_sq = 0
    set this.n = 0
    this # make sure to return this!!
  end

  set update = func(num)
    set this.sum = this.sum + num
    set this.sum_sq = this.sum_sq + num^2
    set this.n = this.n + 1
    unit
  end

  set mean = func() this.sum / this.n end

  set stdev = func()
    ((this.sum_sq / this.n) - ((this.sum / this.n) ^ 2)) ^ 0.5
  end
end

set x = RunningSum()
x::update(50)
x::update(100.5)
@writeln(x::mean())
@writeln(x::stdev())
@writeln(x.sum)

#set RunningSumDebug = define RunningSum subclass
#  set update = func(num)
#    super::update(num)
#    @writeln(this::mean())
#    @writeln(this::stdev())
#  end
#end
